{"remainingRequest":"/usr/node/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/node/app/src/views/scbcarrecord/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/node/app/src/views/scbcarrecord/index.vue","mtime":1602004875000},{"path":"/usr/node/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/node/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/node/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/node/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {addScbCarRecord, delScbCarRecord, getScbCarRecord, listScbCarRecord, updateScbCarRecord} from '@/api/scbcarrecord'\n\nexport default {\n    name: 'Config',\n    data() {\n        return {\n            // 遮罩层\n            loading: true,\n            // 选中数组\n            ids: [],\n            // 非单个禁用\n            single: true,\n            // 非多个禁用\n            multiple: true,\n            // 总条数\n            total: 0,\n            // 弹出层标题\n            title: '',\n            // 是否显示弹出层\n            open: false,\n            isEdit: false,\n            // 类型数据字典\n            typeOptions: [],\n            scbcarrecordList: [],\n            \n            // 查询参数\n            queryParams: {\n                pageIndex: 1,\n                pageSize: 10,\n        \n    },\n        // 表单参数\n        form: {\n        }\n    ,\n        // 表单校验\n        rules: {}\n    }\n    },\n    created() {\n        this.getList()\n        },\n    methods: {\n        /** 查询参数列表 */\n        getList() {\n            this.loading = true\n            listScbCarRecord(this.addDateRange(this.queryParams, this.dateRange)).then(response => {\n                    this.scbcarrecordList = response.data.list\n                    this.total = response.data.count\n                    this.loading = false\n                }\n            )\n        },\n        // 取消按钮\n        cancel() {\n            this.open = false\n            this.reset()\n        },\n        // 表单重置\n        reset() {\n            this.form = {\n            \n            id: undefined,\n            studentId: undefined,\n            carId: undefined,\n            siteId: undefined,\n        }\n            this.resetForm('form')\n        },\n        \n\n        /** 搜索按钮操作 */\n        handleQuery() {\n            this.queryParams.pageIndex = 1\n            this.getList()\n        },\n        /** 重置按钮操作 */\n        resetQuery() {\n            this.dateRange = []\n            this.resetForm('queryForm')\n            this.handleQuery()\n        },\n        /** 新增按钮操作 */\n        handleAdd() {\n            this.reset()\n            this.open = true\n            this.title = '添加上下车记录表'\n            this.isEdit = false\n        },\n        // 多选框选中数据\n        handleSelectionChange(selection) {\n            this.ids = selection.map(item => item.id)\n            this.single = selection.length !== 1\n            this.multiple = !selection.length\n        },\n        /** 修改按钮操作 */\n        handleUpdate(row) {\n            this.reset()\n            const id =\n            row.id || this.ids\n            getScbCarRecord(id).then(response => {\n                this.form = response.data\n                this.open = true\n                this.title = '修改上下车记录表'\n                this.isEdit = true\n            })\n        },\n        /** 提交按钮 */\n        submitForm: function () {\n            this.$refs['form'].validate(valid => {\n                if (valid) {\n                    if (this.form.id !== undefined) {\n                        updateScbCarRecord(this.form).then(response => {\n                            if (response.code === 200) {\n                                this.msgSuccess('修改成功')\n                                this.open = false\n                                this.getList()\n                            } else {\n                                this.msgError(response.msg)\n                            }\n                        })\n                    } else {\n                        addScbCarRecord(this.form).then(response => {\n                            if (response.code === 200) {\n                                this.msgSuccess('新增成功')\n                                this.open = false\n                                this.getList()\n                            } else {\n                                this.msgError(response.msg)\n                            }\n                        })\n                    }\n                }\n            })\n        },\n        /** 删除按钮操作 */\n        handleDelete(row) {\n            const Ids = row.id || this.ids\n            this.$confirm('是否确认删除编号为\"' + Ids + '\"的数据项?', '警告', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(function () {\n                return delScbCarRecord(Ids)\n            }).then(() => {\n                this.getList()\n                this.msgSuccess('删除成功')\n            }).catch(function () {\n            })\n        }\n    }\n}\n",null]}